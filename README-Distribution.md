# Инструкция по сборке, упаковке и запуску (Windows и macOS)

Этот файл описывает, как собрать приложение, подготовить к отправке другу и как другу запустить его у себя.

## Предварительные требования
- Установлен Python 3.9+ (Windows/macOS)
- Интернет для установки зависимостей

---

## Windows

### Вариант A — папка приложения (рекомендуется для пересылки)
1. Откройте командную строку/PowerShell в папке проекта
2. Выполните:
   ```bat
   build-win.bat
   ```
3. Результат: папка `dist/IMU_Monitor/` с `IMU_Monitor.exe` и нужными файлами Qt

Упаковать для пересылки:
1. Запакуйте полностью папку `dist/IMU_Monitor/` в `.zip`
2. Передайте архив другу

Как запустить другу:
1. Разархивировать `IMU_Monitor.zip`
2. Внутри папки запустить `IMU_Monitor.exe`
   - Если антивирус/SmartScreen предупреждает — подтвердить запуск

### Вариант B — один .exe (onefile)
1. В консоли Windows:
   ```bat
   build-win-onefile.bat
   ```
2. Результат: `dist/IMU_Monitor.exe`

Отправка другу: перешлите один файл `IMU_Monitor.exe`.

Примечания:
- Первый запуск может быть дольше (распаковка во временную папку)
- Возможны ложные срабатывания антивируса
- На «чистых» системах может потребоваться Microsoft VC++ Redistributable

---

## macOS

### Вариант A — .app бандл (рекомендуется для пересылки)
1. В терминале в корне проекта:
   ```bash
   chmod +x build-mac-app.sh
   ./build-mac-app.sh
   ```
2. Результат: `dist/IMU_Monitor.app`

Упаковать для пересылки (с сохранением ресурсных форков):
```bash
ditto -c -k --sequesterRsrc --keepParent dist/IMU_Monitor.app IMU_Monitor-mac.zip
```

Как запустить другу:
1. Распаковать `IMU_Monitor-mac.zip`
2. Запустить `IMU_Monitor.app`
3. Если macOS блокирует (Gatekeeper):
   - Правый клик → Открыть → Открыть
   - Или Системные настройки → Конфиденциальность и безопасность → Разрешить запуск

Подписывание/нотаризация (опционально):
- Для уменьшения блокировок нужен Apple Developer ID, затем `codesign` и нотация через `notarytool`

### Вариант B — один бинарник (onefile)
1. В терминале:
   ```bash
   chmod +x build-mac-onefile.sh
   ./build-mac-onefile.sh
   ```
2. Результат: `dist/IMU_Monitor`

Отправка другу: перешлите `IMU_Monitor` (лучше заархивировать перед отправкой).

Примечания:
- Gatekeeper чаще блокирует несигнатуренные одиночные бинарники
- Первый запуск может быть дольше

---

## Частые проблемы и решения
- Нет окна при запуске: проверьте, что вы запустили именно собранную версию в `dist`.
- Блокировка безопасности на macOS: используйте правый клик → Открыть, или разрешите запуск в настройках безопасности.
- Антивирус в Windows ругается: добавьте исключение или используйте вариант с папкой (не onefile).
- Нет нужных плагинов Qt на Windows: используйте сборку из `build-win.bat` (она добавляет необходимые файлы в папку).


